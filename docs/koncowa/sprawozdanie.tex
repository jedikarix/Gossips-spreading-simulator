\documentclass{article}

\usepackage{fancyhdr}
\usepackage[english,polish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{polski}
\usepackage{titling}
\usepackage{graphicx}
\usepackage{indentfirst}
\usepackage{hyperref}
\usepackage{todonotes}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}
\title{Projekt WEDT + SAG \\ Symulator rozchodzenia się plotek \\ Dokumentacja wstępna}
\author{Karol Chęciński, Tomasz Gałecki, Jakub Łyskawa}
\setlength{\droptitle}{-10em}
\begin{document}
	\maketitle
	\section{Opis projektu}
		Projekt polega na utworzeniu symulatora rozchodzenia się plotek. Stosując uproszczony model kontaktów międzyludzkich oparty o sieć agentów porozumiewających się ze sobą, chcemy zbadać w jaki sposób rozprzestrzeniają się informacje w społecznościach. Agenty czerpią informacje z artykułów znalezionych w serwisach informacyjnych. Wybrane informacje przekazują dalej, do swoich sąsiadów w sieci połączeń. 
		By symulacja nie opierała się wyłącznie na powielaniu i propagowaniu otrzymywanych wiadomości, model zostanie wzbogacony o dodatkowe mechanizmy. Po pierwsze, do zadań agenta będzie należeć także ocena wiarygodności informacji. Otrzymanie informacji sprzecznej lub zgodnej z przekonaniami agenta będzie odpowiednio obniżać lub podnosić zaufanie do agenta, który daną informację dostarczył. W czasie propagacji plotki istnieć będzie niewielka szansa, że informacja w niej zawarta zostanie zniekształcona. 
	\section{Opis modelu}
	\subsection{Graf połączeń}
		Model symulacji można przedstawić za pomocą grafu, w którym wierzchołki reprezentują poszczególnych agentów. Krawędzie łączą agentów, którzy się ,,znają'', czyli mogą przekazywać między sobą informacje. Taki graf można rozpatrywać jako graf ważony i skierowany, gdy waga krawędzi z wierzchołka $v_A$, a $v_B$ reprezentuje zaufanie agenta A do agenta B.

		%W projekcie chcemy uwzględnić grafy predefiniowane oraz generowane losowo. Przykładowe opisy topologii:
		%\begin{description}
		%\item[Podzbiór grafu pełnego]
		%Z grafu pełnego o $n$ wierzchołkach losowane jest $c\frac{n(n-1)}{2}, c \in [\frac{2}{n}, 1]$ krawędzi tak, by był spójny. Taki graf ma względnie regularną strukturę. W skrajnym przypadku, gdy $c = \frac{2}{n}$ zostanie wygenerowane drzewo, które również może być interesującym przypadkiem do analizy.
		%\item[Grafy połączone mostami]
		%Graf zbudowany jest z kilku grup - grafów opisanych w punkcie wyżej, przy czym dodatkowo połączone są losowe pary wierzchołków z różnych grup. Topologii tego typu można użyć do zbadania, jak między grupami rozchodzić się będą informacje pochodzące z różnych źródeł, oraz jak kształtować się będzie zaufanie między członkami różnych grup.
		%\end{description}
	\subsection{Charakterystyka agenta}
	Każdy węzeł w grafie połączeń reprezentuje agenta.
	\begin{description}
		\item[Interakcje między agentami]
		Agent może otrzymywać oraz przekazywać informacje innym agentom. Wiadomość wysyłana przez agenta wchodzi pojedyncze zdanie z wiedzy agenta. To w jaki sposób odbiorca zareaguje na otrzymaną informację zależy od jego wiedzy oraz ogólny poziom ufności agenta. 
		\item[Stan agenta]
		Stan agenta składa się z trzech elementów:
		\begin{itemize}
			\item {Informacje otrzymane od innych agentów - 
			Liczba tych informacji może być ograniczona lub nie, co jest sterowane parametrem,
			ponadto nie są duplikowane informacje które agent już posiada albo sprzeczne z posiadanymi.}
			\item {Poziom zaufania do każdej posiadanej informacji}
			\item {Poziom zaufania do każdego połączonego agenta}
		\end{itemize}	
		\item[Model wiedzy]
	 Sposób modyfikacji wiedzy został opisany dokładniej w punkcie \textbf{2.3 - Model zaufania}. U agenta można wyodrębnić 3 podstawowe zachowania:
	 	\begin{itemize}
	 		\item{Pobranie informacji - jeśli dla konkretnego agenta zostało zdefiniowane źródło informacji, w czasie inicjalizacji agenta pobiera on z niego określoną liczbę zdań.}
	 		\item{Przekazanie plotki - jeśli wiedza agenta nie jest pusta, w losowych odstępach czasu wysyła on do losowego sąsiada losową informację. Prawdopodobieństwo wybrania konkretnej informacji jest tym większe, im większe zaufanie agenta do niej.}
	 		\item{Odebranie informacji - w momencie otrzymania wiadomości od innego agenta, aktualizuje on swoją wiedzę oraz poziom zaufania do nadawcy}
		\end{itemize}
	\end{description}
	\subsection{Model zaufania}
	Zufanie w momencie otrzymania wiadomości modyfikowane jest w następujący sposób
	\begin{enumerate}
		\item Agent otrzymuje od innego agenta $n$ informację $p$
		\item Poziom zaufania informacji $p$: $ z = sigmoid(U \cdot Z_a(n)) $
		\item Jeżeli to pierwsza otrzymana informacja,
		zapamiętaj $p$ z $ Z_p(p) \leftarrow z, A(p) \leftarrow n $.
		W przeciwnym wypadku kontynuuj.
		\item Wybierz z przechowywanych informację $p'$ najsilniej związaną semantycznie z $p$
		\item Jeżeli $p'$ jest niezwiązana z $p$, zapamiętaj $p$ z $ Z_p(p) \leftarrow z, A(p) \leftarrow n $ i przerwij.
		\item Jeżeli $p'$ jest równoznaczna z $p$ to:\\
		$ Z_p(p') \leftarrow Z_p(p') + z, Z_a(A(p')) \leftarrow Z_a(A(p')) + z , A(p') \leftarrow n $
		\item Jeżeli $p'$ jest sprzeczna z $p$ to:\\
		$ Z_p(p') \leftarrow Z_p(p') - z, Z_a(A(p')) \leftarrow Z_a(A(p')) - z$\\
		Jeżeli $ Z_p(p') < 0 $ to zapomnij $p'$, zapamiętaj $p$ z\\
		$ Z_p(p) \leftarrow -Z_p(p'), A(p) \leftarrow n $
	\end{enumerate}
	Oznaczenia:
	\begin{itemize}
		\item[$Z_a(x)$] Poziom zaufania agenta do agenta $x$, początkowo $0$
		\item[$Z_p(x)$] Poziom zaufania agenta do informacji $x$, początkowo $0$
		\item[$A(x)$] Agent od którego została po raz ostatni otrzymana informacja równoznaczna z $x$
		
		\item[$U$] Parametr ufności
			
	\end{itemize}
	\subsection{Źródła informacji}
	Istnieje możliwość zdefiniowania do agenta źródła informacji, na podstawie którego zostanie zainicjalizowana początkowa wiedza agenta. Stworzone zostały dwa rodzaje źródeł danych:
	\begin{itemize}
		\item{Źródło oparte o serwis informacyjny - w czasie inicjalizacji źródło tego typu pobiera z wybranego serwisu informacyjnego zadaną liczbę artykułów. Następnie dla pobranych artykułów jest generowane podsumowanie złożone z zadanej liczby zdań. Agent pobierający informację z takiego źródła pobiera wszystkie zdania podstumowujące dany artykuł. Aby symulacja działała prawidłowo, serwisy informacyjne muszą być anglojęzyczne.}
		\item{Źródło predefiniowane - by umożliwić bardziej kontrolowane eksperymenty dodano źródło w którym można umieścić własne, przygotowane wcześniej zdania} 
	\end{itemize}
	\subsection{Logowanie}
	Cały system logowania jest oparty na jednym pliku obsługiwanym przez bibliotekę \texttt{loggigng}. Każda akcja (odebranie plotki, wysłanie plotki, zmiana poziomu zaufania) jest odnotowywana razem ze stemplem czasowym. Wszelkie operacje na plotkach również zawierają identyfikator plotki. Identyfikator plotki jest nadawany w momencie jej tworzenia w \textit{InformationSource}, które inicjuje bazę wiedzy nadając wszystkim informacjom ich ID. Każde źródło informacji numeruje uzykane informacje w sposób ciągły, i wspólny dla wszysktich źródeł informacji.

	Plik z logami jest utrzymany w formacie JSON. Dzięki temu po zakończonej symulacji można w prosty sposób odtworzyć tok symulacji i np. wyłuskać ewolucję informacji w kolejnych przesłaniach w sieci.
	\subsection{Model porównywania zdań}
	Każdy z agentów ma do dyspozycji globalny model dokonujący porównania semantycznego zdań. Jest on potrzebny do zweryfikowania otrzymanej przez agenta informacji z jego wiedzą. \todo{Opisać bardziej strukturę modelu, z jakich części się składa, co daje na wyjściu}
	
	\section{Kwestie techniczne}
	\subsection{Opis działania}
	Wynikiem pracy nad projektem jest stworzenie modułu w języku Python, który zawiera funkcje i obiekty potrzebne do przeprowadzenia symulacji. Symulacja inicjalizowana jest na podstawie grafu (klasa {\tt SimulationGraph}). Do grafu mogą być dodawane nowe agenty. Agentom można przypisać źródła danych ({\tt InformationSource}). Między agentami w grafie można tworzyć połączenia wraz z określeniem początkowego zaufania między agentami. 
	
	Możliwe jest także użycie funkcji do generowania losowej struktury grafu ({\tt connected\_gnp\_graph}, {\tt groups\_graph} i {\tt barabasi\_albert\_graph}) na podstawie zadanych parametrów. Pierwsza z funkcji generuje graf o n wierzchołkach z zadanym prawdopodobieństwem utworzenia krawędzi między poszczególnymi parami wierzchołków. Druga tworzy graf przy użyciu modelu Barabasza-Alberta. Graf taki jest siecią bezskalową, co jest cechą charakterystyczną m.in. dla sieci społecznych. Trzecia procedura pozwala na tworzenie grafu, w którym istnieje kilka grup ściśle powiązanych wierzchołków oraz nielicznie połączenia między wierzchołkami z różnych grup. Graf może zostać także wczytany z pliku. 
	
	Symulację na podstawie grafu inicjalizuje funkcja {\tt initialize\_simulation}. Jej zadaniem jest stworzenie poszczególnych agentów, przekazanie im listy sąsiadów wraz z początkowym poziomem zaufania, oraz uruchomienie agentów.
	
	Agenci rozpoczynają komunikację i wymianę informacji. Trwa to do momentu ręcznego zakończenia działania programu. Możliwe jest wyświetlanie aktualizowanego na bieżąco grafu połączeń, na którym widoczne są zmiany poziomu zaufania między agentami wraz z postępem symulacji.
	
	Szczegółowa instrukcja uruchomienia znajduje się w pliku README dołączonym do projektu.

	\subsection{Wykorzystane technologie}
	Projekt został zaimplementowany w języku \textit{Python}. Wieloagentowość systemu została zrealizowana za pomocą biblioteki \href{https://pypi.org/project/spade/}{spade} do komunikacji wykorzystującej serwer XMPP. W projekcie wykorzystaliśmy serwer \href{https://prosody.im/}{Prosody} 
	
	Do budowy oraz przetwarzania struktur grafowych użyto biblioteki \href{https://networkx.github.io/}{networkx}.
	
	Do pobierania artykułów z serwisów informacyjnych oraz przygotowywania podsumowania artykułów została wykorzystana biblioteka  \href{https://newspaper.readthedocs.io/}{newspaper}.
	
	Powiązanie semantyczne jest wyliczane przy pomocy narzędzia \href{http://nlpprogress.com/english/semantic_textual_similarity.html}{SentEval}, którego implementacja oparta została o platformę deeplearningową \href{https://pytorch.org/}{pytorch}.
	
	Logi w systemie są zbierane za pomocą biblioteki \href{https://docs.python.org/3/library/logging.html#module-logging}{logging}.
	
	\section{Przykładowe eksperymenty}
	\todo{Zaktualizować informacje o eksperymentach}
	Zaproponowany kształt symulacji umożliwia zbadanie wielu interesujacych zjawisk. Poniżej opisane zostały propozycje eksperymentów.
	\begin{itemize}
	\item Badanie w jaki sposób rozpowszechnianie fałszywych plotek przez pojedynczego agenta wpłynie na zaufanie do niego.
	\item Kształtowanie zaufania między grupami agentów korzystających z tego samego lub różnych źródeł informacji.
	\item Badanie pojawiania się w sieci sprzecznych informacji mimo korzystania z tego samego źródła danych w zależności od parametrów mutacji plotek.
	\item Porównanie kształtowania zaufania w sieci z włączonym i wyłączonym mechanizmem modyfikowania plotek.
	\end{itemize}
	\section{Zadania}
	\begin{itemize}
	\item Pobieranie danych z różnych serwisów informacyjnych
	\item Graf
		\begin{itemize}
		\item Generowanie grafu agentów
		\item Implementacja komunikacji między agentami
		\item System raportowania przesyłanych plotek
		\item Uruchamianie eksperymentów z zadanymi parametrami
		\end{itemize}
	\item Agent
		\begin{itemize}
		\item Implementacja mechanizmu zaufania
		\item Wytrenowanie modelu oceny powiązania informacji
		\end{itemize}
	\item Plotka
		\begin{itemize}
		\item Stworzenie struktury plotki wraz z metadanymi
		\item Losowa modyfikacja plotek
		\end{itemize}
	\item Logowanie
		\begin{itemize}
		\item System zbierania i opracowywania logów od poszczególnych agentów
		\end{itemize}
	\end{itemize}
	
	\section{Podsumowanie}
	\todo{Podsumowanie - opisać jak wyszła symulacja, jakie były problemy (np. słaby model), podsumować krótko eksperymenty}
\end{document}


